<!DOCTYPE html>
<html  >
<head>
  <title>calculitor </title>
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="icon"    href="https://calculesite.github.io/calc.png">
      <link rel="manifest" href="manifestcalc.json" />
      
<!-- bootstrap -->
<style>
  @charset "UTF-8";

 :focus
:root {
  --bs-blue: #0d6efd;
  --bs-indigo: #6610f2;
  --bs-purple: #6f42c1;
  --bs-pink: #d63384;
  --bs-red: #dc3545;
  --bs-orange: #fd7e14;
  --bs-yellow: #ffc107;
  --bs-green: #198754;
  --bs-teal: #20c997;
  --bs-cyan: #0dcaf0;
  --bs-white: #fff;
  --bs-gray: #6c757d;
  --bs-gray-dark: #343a40;
  --bs-gray-100: #f8f9fa;
  --bs-gray-200: #e9ecef;
  --bs-gray-300: #dee2e6;
  --bs-gray-400: #ced4da;
  --bs-gray-500: #adb5bd;
  --bs-gray-600: #6c757d;
  --bs-gray-700: #495057;
  --bs-gray-800: #343a40;
  --bs-gray-900: #212529;
  --bs-primary: #0d6efd;
  --bs-secondary: #6c757d;
  --bs-success: #198754;
  --bs-info: #0dcaf0;
  --bs-warning: #ffc107;
  --bs-danger: #dc3545;
  --bs-light: #f8f9fa;
  --bs-dark: #212529;
  --bs-primary-rgb: 13, 110, 253;
  --bs-secondary-rgb: 108, 117, 125;
  --bs-success-rgb: 25, 135, 84;
  --bs-info-rgb: 13, 202, 240;
  --bs-warning-rgb: 255, 193, 7;
  --bs-danger-rgb: 220, 53, 69;
  --bs-light-rgb: 248, 249, 250;
  --bs-dark-rgb: 33, 37, 41;
  --bs-white-rgb: 255, 255, 255;
  --bs-black-rgb: 0, 0, 0;
  --bs-body-color-rgb: 33, 37, 41;
  --bs-body-bg-rgb: 255, 255, 255;
  --bs-font-sans-serif: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
   "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --bs-font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --bs-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));
  --bs-body-font-family: var(--bs-font-sans-serif);
  --bs-body-font-size: 1rem;
  --bs-body-font-weight: 400;
  --bs-body-line-height: 1.5;
  --bs-body-color: #212529;
  --bs-body-bg: #fff;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

@media (prefers-reduced-motion: no-preference) {
  :root {
    scroll-behavior: smooth;
  }
}

body {
  margin: 0;
  font-family: var(--bs-body-font-family);
  font-size: var(--bs-body-font-size);
  font-weight: var(--bs-body-font-weight);
  line-height: var(--bs-body-line-height);
  color: var(--bs-body-color);
  text-align: var(--bs-body-text-align);
  background-color: var(--bs-body-bg);
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

a {
  color: #0d6efd;
  text-decoration: underline;
}
a:hover {
  color: #0a58ca;
}

a:not([href]):not([class]), a:not([href]):not([class]):hover {
  color: inherit;
  text-decoration: none;
}
sup {
    position: relative;
    vertical-align: baseline;
    top: -20%;
    margin: 0% -3% 0% 2%;
}

button,
[type=button],
[type=reset],
[type=submit] {
  -webkit-appearance: button;
}
button:not(:disabled),
[type=button]:not(:disabled),
[type=reset]:not(:disabled),
[type=submit]:not(:disabled) {
  cursor: pointer;
}
.btn {
  display: inline-block;
  font-weight: 400;
  line-height: 1.5;
  color: #212529;
  text-align: center;
  text-decoration: none;
  vertical-align: middle;
  cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  background-color: transparent;
  border: 1px solid transparent;
  padding: 0.375rem 0.75rem;
  font-size: 1rem;
  border-radius: 0.25rem;
  transition: color 0.15s ease-in-out,
   background-color 0.15s ease-in-out,
   border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}
@media (prefers-reduced-motion: reduce) {
  .btn {
    transition: none;
  }
}
.btn:hover {
  color: #212529;
}
.btn-check:focus + .btn, .btn:focus {
   outline: none;
 /* box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25); */
}
/* .btn:disabled, .btn.disabled, fieldset:disabled .btn {
  pointer-events: none;
  opacity: 0.65;
} */

.btn-primary {
  color: #fff;
  background-color: #0d6efd;
  border-color: #0d6efd;
}
.btn-primary:hover {
  color: #fff;
  background-color: #0b5ed7;
  border-color: #0a58ca;
}
/* .btn-check:focus + .btn-primary, .btn-primary:focus {
  color: #fff;
  background-color: #0b5ed7;
  border-color: #0a58ca;
  box-shadow: 0 0 0 0.25rem rgba(49, 132, 253, 0.5); 
} */
.btn-check:checked + .btn-primary, .btn-check:active + .btn-primary,
 .btn-primary:active, .btn-primary.active, .show > .btn-primary.dropdown-toggle {
  color: #fff;
  background-color: #0d6efd;
  border-color: #0d6efd;
}
.btn-check:checked + .btn-primary:focus, .btn-check:active + .btn-primary:focus,
 .btn-primary:active:focus, .btn-primary.active:focus, .show > .btn-primary.dropdown-toggle:focus {
  box-shadow: 0 0 0 0.25rem rgba(49, 132, 253, 0.5);
}

.btn-primary:disabled, .btn-primary.disabled {
  color: #fff;
  background-color: #0d6efd;
  border-color: #0d6efd;
}
.btn-success {
  color: #fff;
  background-color: #198754;
  border-color: #198754;
}
.btn-success:hover {
  color: #fff;
  background-color: #157347;
  border-color: #146c43;
}

/* .btn-check:checked + .btn-success, .btn-check:active + .btn-success,
 .btn-success:active, .btn-success.active, .show > .btn-success.dropdown-toggle {
  color: #fff;
  background-color: #146c43;
  border-color: #13653f;
}*/
.btn-check:checked + .btn-success:focus, .btn-check:active +
 .btn-success:focus, .btn-success:active:focus, .btn-success.active:focus,
  .show > .btn-success.dropdown-toggle:focus {
  box-shadow: 0 0 0 0.25rem rgba(60, 153, 110, 0.5);
} 
.btn-success:disabled, .btn-success.disabled {
  color: #fff;
  background-color: #198754;
  border-color: #198754;
}

.btn-info {
  color: #000;
  background-color: #0dcaf0;
  border-color: #0dcaf0;
}
.btn-info:hover {
  color: #000;
  background-color: #31d2f2;
  border-color: #25cff2;
}
/*  .btn-check:focus + .btn-info, .btn-info:focus {
  color: #000;
  background-color: #31d2f2;
  border-color: #25cff2;
  box-shadow: 0 0 0 0.25rem rgba(11, 172, 204, 0.5);
}  */
.btn-check:checked + .btn-info, .btn-check:active + .btn-info, .btn-info:active,
 .btn-info.active, .show > .btn-info.dropdown-toggle {
  color: #000;
  background-color: #3dd5f3;
  border-color: #25cff2;
}
.btn-check:checked + .btn-info:focus, .btn-check:active + .btn-info:focus,
 .btn-info:active:focus, .btn-info.active:focus, .show > .btn-info.dropdown-toggle:focus {
  box-shadow: 0 0 0 0.25rem rgba(11, 172, 204, 0.5);
}
.btn-info:disabled, .btn-info.disabled {
  color: #000;
  background-color: #0dcaf0;
  border-color: #0dcaf0;
}
 


.card {
  position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #ddd;
    background-clip: border-box;
    border: 1px solid #ddd;
    border-radius: 0.25rem;
}


.card-body {
  flex: 1 1 auto;
  padding: 1rem 1rem;
  
}
.fs-5 {
  font-size: 1.25rem !important;
}
</style>
<!-- style.css -->
<style>

/* ///////// stayle equation */
/* ///////////////////////// */

* ,body, html{
    margin: 0;
    padding: 0;
   
 }
 html{
   height: 100%;
 }
/* divs */
/* .globalContiner{
    width: auto;
    background: #ddd;
    margin: 20px;
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
} */
.func{
    display: none;
    grid-template-columns: repeat(6,1fr);
    grid-template-rows: repeat(4,45px);
    column-gap: 2%;
    row-gap: 0%;
    margin-top: 15px;
}
.continent{
    display: none;
    grid-template-columns: 2.1fr 2.1fr 2.1fr 1.85fr 1.85fr;
    column-gap: 3%;
    row-gap: 4%;
    margin-bottom: 20px;

}


/* //////////////// */


/* ///// btn\\\\\\ */
.drg{
    display:none;
    margin-left: 5px;
    margin-top: -25px;
    position: absolute;
    font-size: small;
    background: floralwhite;
    padding: 3px;
    border-width: medium;
    border-radius: 6%;
    cursor: pointer;
}

.mimoir{
    width: 10px;
    font-size: small;
    background-color: floralwhite;
    color: floralwhite;
    margin-top: 15%;;
    margin-left: 3px;
    position: absolute;
}

.fsup{
    top: -10%;
  margin: 0% -3% 0% -4%;
}



.btn-ver{

    background: #198743;
    transition: 0.3s;
    
}

.Cbtn{
    height: 35px;
    padding: 5%;
}
.symbolBtn , .btn-ver{
    height: 100%;
    font-size: 100%;
    padding: 10%;
}
.btn-ver:active{
    

    background: #198743 !important;
}


.btn-primary2.disabled{
    background-color:#ff5a61 ;
    border-color: #ee3c3e;
}
.btn-primary2:hover{
    background-color: rgb(248, 61, 61) ;
    border-color: rgb(254, 34, 34);
}

</style>

  <style>

    #background {
      min-height:100vh;
      text-align: center;
      
      background-size:cover;
      background-position:center center;
      background-repeat: no-repeat;
      
    }
    
    #inner-wrapper{
        
      width:100%;
      min-height: 100vh;
      background-color: white;
      text-align:center;
      
      color:white;
    }
    
    .page{
      background-color: white;
      width:100%;
      height:100%;
      margin-top: 30px;
    }


    .register_form{
      max-width:450px!important;
      margin:10px auto;
      color:black;

      text-align: left;
    }


/* /// inp */
.inp {
    box-sizing: border-box;
    font: 400 13.3333px Arial;
    font-size: 30px;
    background-color: floralwhite !important;
    width: 99.8%;
    margin: 20px 0px -32px 0%;
    padding: 5px 15px 30px 18px;
    border-radius: 10px;
    height: 150px;
    overflow-y: auto;
    cursor: pointer;
}
.inp ,.result ,button :focus{
    outline-width: inherit;
    outline: none;
    
}
.result{
    margin: -6px 0px 0px 18px;
    font: 400 13.3333px Arial;
    font-size: 25px;
    height: 32px;
    width: 90%;
    background-color: floralwhite;
    padding: 0px 0px;
    position: relative;
    cursor: pointer;
}
.ogmentation{
  animation-name: ogment;
  animation-duration: 0.301s;
}

@media (max-width: 900px){
    .inp{font-size: 25px;margin-top: 25px;height: 125px;}
    .result{font-size: 18px; }
    .ogmentation{animation-name: ogmentTlph;}
}
@keyframes ogment{
  to{
    transform:translateY(-113px) ;
    font-size: 30px;
    color: black;
  }
}
/* 31256568897*3554665464-31312332+15566588789897-5454546+6589965788555 */
@keyframes ogmentTlph{
  to{
    transform:translateY(-88px) ;
    font-size: 25px;
    color: black;
    
  }
}
.nrml{
  
  
  display: grid;
    grid-template-columns: repeat(4,1fr) ;
    margin-top: 15px;
    column-gap: 3%;
    row-gap: 4%;
    margin-bottom: 55px; 
 /*  transition: transform 0.5s;
  transform-style: preserve-3d; */
  
}

 .upPad{
  width: 100%;
  background:floralwhite;
  position:relative;
  animation-name: zooming;
  animation-duration: 0.3s;
}
@keyframes zooming{
  to{
    padding-bottom: 130px;
  }
} 
 
   
</style>
    
</head>
<body style="background-color:white">
  
  <main role="main" id="background" >
  <div id="inner-wrapper">
  <div class="page" data-page-nbr="1">
  
  <div class="card register_form">
    
    <div class="card-body " style=" background-color: rgb(230, 225, 225);">
      
      
  <div id="cart">
    <p id="drg" onclick="drgFun()" class="drg">deg</p>
    <p id="mimoir" class="mimoir">M</p>

    <div id="fichour"  aria-atomic="false"  onclick="paste()" 
      class="inp"   placeholder="0">0</div>

    <div id="result"    onclick="copier()"
    class="result "  ></div>
    
    
    
        <div id="fdiv" class="func"></div>
        <div id="divNum" class="continent"></div>

        <div id="nrmldv" class="nrml"></div>
     

  </div>
  </div>
  </main>
      <script type="text/javascript" >
      /*////  variables    5310.0000000001 */
let ongl = 0.017453292519943 ,reOngl=57.29577951308329, mim='' ,fichour =gebi('fichour'),Scien=1,
    result = gebi('result'), 
    div1= gebi('fdiv'),div2 = gebi('divNum'),

    //classes
    c1 = ' btn-primary Cbtn',c2 =' btn-success btn-ver',c3= ' btn-info symbolBtn',

    // functions  
    f1 ='add('   , f2='addFunc(', f3='adCar(',   f4='addSymbF(' , f5='addSymbP(', f6='retour()', f7='clearing()',
    f8='scNrml()', f9='save()'  , f10='retSive()',f11='addSave()', f12='upRes()', f13= 'addVrgl()'

    //arrays
    //array function
     arF =[ f2+"'sin(')",f2+"'cos(')"   ,f2+"'tan(')"  ,f3+"'%')" ,f2+"'abs(')",f8 ,
            f2+"'asin(')",f2+"'acos(')" ,f2+"'atan(')" ,f2+"'e^(')" ,f2+"'Ln(')"   ,f2+"'log(')",
            f2+"'sinh(')",f2+"'cosh(')" ,f2+"'tanh(')" ,f2+"'(')"   ,f3+"')')"     , f6,
            f2+"'3.141592653589793')"   ,f3+"'^')"     ,f2+"'√(')"  ,f3+"'^(-1)')"   ,f3+"'²')"     ,f7,
            f1+"'7')",f1+"'8')" ,f1+"'9')" ,f4+"'/')", f9,
            f1+"'4')",f1+"'5')" ,f1+"'6')" ,f4+"'×')", f10,
            f1+"'1')",f1+"'2')" ,f1+"'3')" ,f5+"'-')", f11,
            f1+"'0')",f2+"'(-')",f13 ,f5+"'+')" ,f12  ,
            ///normal
            f2+"'(')"  , f3+"')')"  ,f8        ,f7    ,
            f4+"'/')"  ,f4+"'×')"  ,f3+"'%')"  ,f6,
             f1+"'7')" ,f1+"'8')"  ,f1+"'9')"  ,f3+"'^(-1)')",
             f1+"'4')" ,f1+"'5')"  ,f1+"'6')"  ,f5+"'-')",
             f1+"'1')" ,f1+"'2')"  ,f1+"'3')"  ,f5+"'+')",
             f1+"'0')" ,f2+"'(-')" ,f13        ,f12    ],

           //class normal
    arClN =[c1        ,c1    ,c1              ,c1+' btn-primary2',
            c3        ,c3    ,c3              ,c3,
            c2        ,c2    ,c2              ,c3,
            c2        ,c2    ,c2              ,c3,
            c2        ,c2    ,c2              ,c3,
            c2        ,c2    ,c2              ,c3,],
            
    //arry classes        
    arCl =[...Array(23).keys()],//fichour.innerText = arCl


    //arry innerHtml
     arIH = ['sin' ,'cos' ,'tan'    ,'%'    ,'|x|'  ,'S/N',
              'asin','acos','atan'  ,'e<sup>x</sup>','Ln' ,'log',
              'sinh','cosh','tanh'  ,'('    ,')'    ,'←'  ,
              'π'   ,'y<sup>x</sup>','√x'   ,'1/x'  ,'x²' ,'C',
              '7'   ,'8'            , '9'   ,'÷'    ,'X<sup class="fsup">→</sup>M',
              '4'   ,'5'            , '6'   ,'×'    ,'RM',
              '1'   ,'2'            , '3'   ,'-'    ,'M+',
              '0'   ,'-/+'          , ','   ,'+'    ,'='   ,
            // normal
              '('   ,')'            ,'N/S'   ,'C'    ,
              '÷'   ,'×'            ,'%'    ,'←'    ,
              '7'   ,'8'            , '9'   ,'1/x'  ,
              '4'   ,'5'            , '6'   ,'-'    ,
              '1'   ,'2'            , '3'   ,'+'    ,
              '0'   ,'-/+'          , ','   ,'='     ];
    
   arCl.fill(c1);arCl.push(c1+' btn-primary2',c2,c2,c2,c3,c3,c2,c2,c2,c3,c3,c2,c2,c2,c3,c3,c2,c2,c2,c3,c3);
   arCl = arCl.concat(arClN);
   
/* #################################################
################################################# */



   /* aficher les divs*/
    divBtn(0,24,'fdiv');
   divBtn(24,44,'divNum');
   
    divBtn(44,68,'nrmldv')

   /* //// function creat btn */
function divBtn(i,fi,div) {
    div= gebi(div);
    for ( ;i < fi; i++) {
        div.innerHTML+='<button id="b'+i+'"   onclick="'+arF[i]+
          '"class="btn disabled '+arCl[i]+' "role="button" >'+arIH[i]+'</button>';
      }
}


/* /////  sev mimoir on href \\\\\\\\\\ */
if (location.href.indexOf('#mim') > -1) {
    let nHref = location.href ,
    inMim = nHref.indexOf('#mim=')+5;
    mim = nHref.slice(inMim , nHref.length);
    mim = rep(mim,'%C3%97', '×');
    mim = rep(mim,'%E2%88%9A', '√'); 
    gebi('mimoir').style.color = 'black';
}

/*  jump functin */

function jump(){
  fichour.scrollTop = fichour.scrollHeight;
  sliZir();
}
/*   functin of click keybord */
addEventListener('keyup',   (e) => {//e event
    e.preventDefault();
   
    let kc = e.keyCode-96 ,inp=fichour.innerText;
  // fichour.innerText = event.keyCode;
  
    if ((kc > -1) && (kc < 10)) { fichour.innerText += kc; }
    if (kc == 14) { addVrgl(','); }
    if (e.keyCode === 107) { addSymbP('+'); }
    if (e.keyCode === 109) { addSymbP('-'); }
    if (e.keyCode === 106) { addSymbF('×'); }
    if (e.keyCode === 111) { addSymbF('/'); }
    if (e.keyCode === 219) { adCar(')'); }
    if (e.keyCode === 53) { addFunc('('); }
    if (e.keyCode === 8) { retour();}
    
    if (e.keyCode === 13) { upRes();}
    if (e.keyCode !== 13) { calcule();}
    
    jump(); 
}
)


/* ///// functin of click moss \\\\\\ */
 
addEventListener('click',  (e)=> {
  if ((e.target.id !== 'result')&&(e.target.innerText !== '=')&&(e.target.id !== 'fichour')) {
      calcule();
    }  

    jump();  
    
})
/* ////trensfer scientific and normal */
function scNrml() {
  let arStl = [ [  'fdiv' ,'divNum', 'drg' ,'nrmldv'                                    ],//style
                [ ['grid' , 'grid' ,'block', 'none' ],['none','none','none','grid' ] ] ];//display
  if (Scien==1) { 
    for (let i = 0; i < arStl[0].length; i++) {
       gebi(arStl[0][i]).style.display   = arStl[1][0][i];
    }
    Scien=0;
  } else {
    for (let i = 0; i < arStl[0].length; i++) {
       gebi(arStl[0][i]).style.display   = arStl[1][1][i];
    }
    Scien=1;
  }

}

/* /// Copier */
function copier() {
  if (result.innerText == 'The result copied') {result.innerText='';}

  if (result.innerText.length>0) {
    navigator.clipboard.writeText(result.innerText);
      result.innerText = 'The result copied';
  } 
  
}

/* /// paste */
 function paste() { 
   navigator.clipboard.readText().then((text)=>{ fichour.innerText +=text; })
   jump();
   calcule();
  }
 
/* ///racorce get elment */
function gebi(param) { param = document.getElementById(param); return param;}


/* //// Up result to fichour */
function upRes() {
 if(result.innerText.length ==0 || result.innerText != 'The result copied' ){
calcule();
}
  
  if(result.innerText ==''){
      return false}

   result.className +=' ogmentation';
   fichour.innerText ='';
   setTimeout(() => {
    fichour.className = 'inp';
   fichour.innerText = result.innerText;;
   result.innerText = '';
   result.className ='result';
   }, 300);
  
}

/* 31256568897*3554665464-31312332+15566588789897-5454546+6589965788555 */

/* function upRes() {
  calcule();
  if((result.innerText.length >0)&&result.innerText != 'The result copied'){
    fichour.className +=' upPad';
   result.className +=' ogmentation';
   let trf=true;
   setTimeout(() => {trf=false;},300);
  

   setTimeout(() => {
    fichour.className = 'inp';
   fichour.innerText = result.innerText;;
   result.innerText = '';
   result.className ='result';
   }, 300);
   do {
      jump();
   }while(trf) 
  }
} */

/*  /////// add \\\\\\\\\ */
function add(caracter) {//f1
     
     let inp = fichour.innerText,
        lenInp = inp.length,
        carInp = inp.charAt(lenInp - 1);
        if (inp=='0') {fichour.innerText='';}
        if ((carInp==')')||(carInp=='²')||(carInp==='%')) {
          inp +='×' 
        }
        fichour.innerText = inp+ caracter ;
}

/*  /////add function\\\\\\ */
function addFunc(param) { //f2
    let inp = fichour.innerText,
        lenInp = inp.length,
        carInp = inp.charAt(lenInp - 1),
        symbols = '/*×-+^(';
        if (inp=='0') {fichour.innerText='';}
    if ((symbols.indexOf(carInp,0) > -1)||(lenInp ==0)) {
        inp += param;
    } else { addSymbF('×');inp =fichour.innerText  + param;}
    fichour.innerText = inp;
    
}

/*  /////add caracter\\\\\\ */
function adCar(param) { //f3
  
    let inp = fichour.innerText,
        lenInp = inp.length,
        carInp = inp.charAt(lenInp - 1),
        symbols = '/*×-+(',
        inpLef= rep(inp,'(', ''),
        inpRi   = rep(inp,')','');
    if ((symbols.indexOf(carInp, 0) == -1) && (lenInp != 0)&&
        (((carInp !='%')||(param !='^'))&&( (carInp !='%')||(param !='²'))   )) {
      if (param !=')') {
        inp +=  param;
      }else if ((param==')')&&(inpLef.length < inpRi.length)) {
        inp +=  param;
      }
      
    }
    fichour.innerHTML = inp;
       
}


/* //////// add symbole × / */
function addSymbF(param) {//f4
    let inp = fichour.innerText,
        lenInp = inp.length - 1,
        carInp = inp.charAt(lenInp),
        carInp2 = inp.charAt(lenInp-1),
        symbols = '/*×-+.,',
        symbol2 = '(';
    if ((lenInp > -1) && (symbol2.indexOf(carInp, 0) == -1)) {
        if (symbols.indexOf(carInp, 0) > -1) {
            if ((symbol2.indexOf(carInp2, 0) == -1)) {
                inp = inp.slice(0, lenInp);
                inp += param;
            } 
        }else{inp += param; }
    } 
    fichour.innerText = inp;
}

/* /////// add Symbole + -  \\\\\\\ */
function addSymbP(param) { //f5
    let inp   = fichour.innerText,
        lenInp = inp.length - 1,
        carInp = inp.charAt(lenInp),
        plus     = '+' ,
        symbols  = '/*×-+.,';
    
        if (symbols.indexOf(carInp,0) > -1) {
            inp = inp.slice(0,lenInp );
            plus = '';
        }
        inp += param; 
    
    fichour.innerText = inp;
    return plus
}

/* ////// add virguele \\\\\ */
function addVrgl() {
  let inp = fichour.innerText,lenInp = inp.length ,
    carInp=inp.charAt(lenInp -1),
     arRe =['+','-','/','×','*','^','('] ;

    arRe.forEach((e)=> {inp=rep(inp,e,'@');})
    
        inp = rep(inp,',','.');

  
        if (inp.lastIndexOf('@',lenInp)>=inp.lastIndexOf('.',lenInp)&&(arRe.indexOf(carInp, 0) < 0)) {
          addSymbF(',')
        }
}


/* ///// retour \\\\\\\\\\\ */
function retour() { //f6
    let inp = fichour.innerText,
        lenInp = inp.length,
        carInp = inp.charAt(lenInp - 1),
        carInp2 = inp.charAt(lenInp - 2),
        symbols = '/*×-+(1234567890.,';
    
    if (lenInp > 0) {
        if (((carInp == '(') || (carInp == '^')) && (symbols.indexOf(carInp2, 0) < 0)&&(Scien==0)) {
            ////replace background-color: floralwhite;
    let arRep=[['abs(','cosh(','acos(','cos(','e^(','Ln(','log(','√(','asin(','sinh(','sin(','atan(','tanh(','tan('],
               ['d'   , 'f'   , 'j'   , 'k'  , 'm' , 'p' , 'q'  , 'r', 'u'   , 'v'   , 'w'  , 'x'   , 'y'   , 'z'  ]];

          for (let i = 0; i < arRep[0].length; i++) { 
            if (inp.indexOf(arRep[0][i],0)>-1) {inp = rep(inp,arRep[0][i], arRep[1][i]); }
            }
          
            inp = inp.slice(0,inp.length - 1);

            /////reteur
            for (let i = 0; i < arRep[0].length; i++) { 
              if (inp.indexOf(arRep[1][i],0)>-1) { inp = rep(inp,arRep[1][i], arRep[0][i]);}
            }
         
        } else { inp = inp.slice(0, inp.length - 1); }
    }
    fichour.innerText = inp;
    
}

/* //////clearing \\\\\\\\\\   */
function clearing() { /* //f7  */ fichour.innerText = '0'; }

/* //////// replice drg ongle */
function drgFun() { //f8
    let drg = gebi('drg').innerHTML;
    if (drg == 'deg') {gebi('drg').innerHTML = 'rad'; ongl = 1; reOngl=1;
    } else if (drg == 'rad') { gebi('drg').innerHTML = 'grad'; ongl = 0.015707963267948967;reOngl=63.66197723675813;
    } else {gebi('drg').innerHTML = 'deg'; ongl = 0.017453292519943295; reOngl=57.29577951308329 ;
    }
}

/* ////mimoiring number \\\\\\*/
function save() {//f9
    let nHref = location.href,
        hach = 0 ;
    
    if (mim.length >0 ) {
        let inNHref = nHref.indexOf('#mim=');
        nHref = nHref.slice(0, inNHref);
        mim = '';
        hach = 1;
        
    }else if(location.href.charAt(nHref.length-1) =='#'){hach = 2;}

    if(nHref.charAt(nHref.length-1) =='#'){nHref = nHref.slice(0, nHref.length-1);}

    if (result.innerText.length > 0) {
        mim =  result.innerText;
        nHref+= '#mim='+ mim;
        location.href = nHref; gebi('mimoir').style.color = 'black';
    }else if (fichour.innerText!=='0' && fichour.innerText!=='') {
        mim =  fichour.innerText ;
        fichour.innerText = '';
        setTimeout(() => { 
        fichour.innerText = mim;
        }, 90);
        nHref += '#mim='+ mim ;
        location.href = nHref; gebi('mimoir').style.color = 'black';
    }else if (fichour.innerText =='' || fichour.innerText =='0') {
        gebi('mimoir').style.color = 'floralwhite';
        if(hach ==1){location.href = nHref+'#';}
    }

}

/* /////// reteur de sive \\\\\\\\\ */
function retSive() { //f10
    if (mim.length > 0) {
        fichour.innerText += mim;
    }
}


/* ////// add save \\\\\\\\ */
function addSave() { //f11
    
    if (mim.length == 0) {
        save();
    } else {
        
        let nHref = location.href,
            inNHref = nHref.indexOf('#mim=')+1;
        nHref = nHref.slice(0, inNHref);
        if (result.innerText.length > 0) {
            mim +=  addSymbP('+') + result.innerText;
            nHref +='mim='+ mim;
        } else {
          let nMim =fichour.innerText;
            mim += addSymbP('+')+ nMim; 
            fichour.innerText = '';fichour.placeholder= "";
        setTimeout(() => { //==== setTimeout(function(){code},time)
        fichour.innerText = nMim;fichour.placeholder= "0";
        }, 90);
            nHref +='mim='+ mim;
        }
        location.href = nHref;
    }
}

/* //////// replace \\\\\\ */
function rep(inp,param1,param2) {
  
  while (inp.indexOf(param1,0)>-1) {
    inp = inp.replace(param1 ,param2);
  } 

  return inp ;
}


/* 25×(65+7+(6+3))+69×(85 */
/* ///////// Calcule valure enter btackets \\\\\\\ */
function brackets(inp) {
  let   inRB ,//index of Right brackets
        i=0,upInp,inLB ,dwInp ,inRBDw ,//inp right bracket down
        bet ; //  between brackets

  while (inp.indexOf(')',0)>-1) {
        i++;
        inRB = inp.indexOf(')', 0);//index of Right bracket
        upInp = inp.slice(0, inRB);
        inLB = upInp.lastIndexOf('(', inRB);
        dwInp = inp.slice(inLB, inp.length);
        inRBDw = dwInp.indexOf(')', 0);
        bet = dwInp.slice(1, inRBDw); //  between brackets
        upInp = inp.slice(0, inLB);

     //calc between brackets
        bet = rep(bet,'left','(' );
        bet = rep(bet,'right',')' );
        bet = eval(bet);
        if(Math.abs(bet- bet.toFixed(5))< 1e-10){bet =bet.toFixed(5);bet = 1*bet;}
       
      //replace ( to left and ) to right
        dwInp = dwInp.slice(inRBDw,dwInp.length);
        dwInp = dwInp.replace(')','right')
        dwInp ='left'+bet+ dwInp;

        inp=upInp+dwInp;

        if (i>10000) { break; }
  }
  inp = rep(inp,'left','(');
  inp = rep(inp,'right',')');
    return inp;
}

/* //// calc Math.cos,sin... and calc Math.acos,asin... \\\\\ */
function acstAMat(inp,pr) { //acos asin atan and Math.cos,sin,tan

  let inUpInp,upInp,dwInp,intLef,intRi,difRL,i=0;
  while (inp.indexOf(pr,0)>-1) {
    i++;
      inUpInp=inp.lastIndexOf(pr,inp.length);
      upInp=inp.slice(0,inUpInp);
      dwInp=inp.slice(inUpInp,inp.length);
      intLef = rep(dwInp,'(', '');
      intRi = rep(dwInp,')', '');
      difRL = intLef.length - intRi.length;
      dwInp=dwInp.slice(0,dwInp.length-difRL);
      //calc between brackets
      dwInp=brackets(dwInp);
      
        dwInp = eval(dwInp);
        if(Math.abs(dwInp- dwInp.toFixed(5))<1e-10){dwInp =dwInp.toFixed(5);dwInp = 1*dwInp;}
        inp=upInp+dwInp;
        for (let j = 0; j < difRL ; j++) {inp += ')';}
        if (i>10000) { break; }
  }
  return inp;
  
}

/* ////// find 0 after nember and slice \\\\\\ */
function sliZir() {
    if(fichour.innerText.indexOf('0',0) ==-1 || fichour.innerText =='0' ){
      return false}
    let inp  = fichour.innerText,
     symbols = ['+','-','/','×','*','^','('],
     numbers = ['0','1','2','3','4','5','6','7','8','9'];

     if ((inp.charAt(0)==='0')&&(numbers.indexOf(inp.charAt(1))>-1)) {inp=inp.slice(1,inp.length);}

     symbols.forEach((sy)=> {
      if (inp.indexOf(sy+'0',0)>-1) {
        numbers.forEach((nu)=> {
          if(inp.indexOf(sy+'0'+nu,0)>-1){inp=rep(inp,sy+'0'+nu,sy+nu);}
        })
      }
  })
  fichour.innerText=inp;
}

/*////// gonfler les valeur \\\\\\ */
function fixing(inp,ng=0) { // ng nember gonfel
  let sInp   = inp.toString(),inUpInp= sInp.indexOf('e',0),
      upInp  = sInp.slice(0,inUpInp), dwInp  = sInp.slice(inUpInp+1,sInp.length);

    upInp  = eval(upInp);
    dwInp  = eval(dwInp-ng);
    upInp  = upInp.toFixed(13) ;upInp = 1*upInp;
    sInp   = upInp+'e'+dwInp;
    inp    = eval(sInp);
    return inp ;
}


/*  ////////// equale \\\\\\\\\\\\\\ */
///////////////////////////////////////
///////////////////////////////////////

function calcule() { //f12


    let inp    = fichour.innerText;
        lenInp = inp.length,
        carInp = inp.charAt(lenInp - 1),
        intLef = rep(inp,'(', ''), arRe=[],
        intRi = rep(inp,')', ''),
        difRL = intRi.length - intLef.length,
        symbols = '/*×-+(^'; 
        
        if((symbols.indexOf(carInp,0)>-1)||(lenInp<3)){  
           result.innerText='';
           return false; } 

        for (let i = 0; i < difRL ; i++) {inp += ')';}
    /* ////replasment\\\\ */
    inp = rep(inp,',', '.');      inp = rep(inp,'×', '*');   inp = rep(inp,'%', '*1/100');
    inp = rep(inp,'^', '**');     inp = rep(inp,'²', '**2');
    let fich = inp;

        
    if (inp.indexOf('(',0)>-1) {
    
       arRe=[
        ['cosh','acos','cos(','asin','sinh','sin(','atan','tanh','tan(','log','abs','k','j','f','e**',
             'q','Ln','√','w','u','v','z','x','y'],
        ['f', 'j', 'k', 'u', 'v', 'w', 'x', 'y', 'z', 'q', 'Math.abs', 'Math.cos('+ongl+'*', reOngl+'*Math.acos',
         'Math.cosh', '2.718281828459045**', 'Math.log10', 'Math.log', 'Math.sqrt', 'Math.sin('+ongl+'*',
         reOngl+'*Math.asin', 'Math.sinh', 'Math.tan('+ongl+'*', reOngl+'*Math.atan', 'Math.tanh']
          ];
         
          for (let i = 0; i < arRe[0].length; i++) { 
            if (inp.indexOf(arRe[0][i],0)>-1) {
              inp = rep(inp,arRe[0][i], arRe[1][i]); 
            }
          }
          if(inp.indexOf(reOngl+'*Math',0)>-1){inp= acstAMat(inp,reOngl+'*Math');}
          if(inp.indexOf('Math',0)>-1){inp= acstAMat(inp,'Math');}
          if(inp.indexOf('(',0)>-1){inp = brackets(inp);}
          
    }
      
  

     
/* /////// result */
        result.innerText = '';
      if (inp.length >0) {
        if ((inp.charAt(0)==='0')&&(inp.charAt(1)!=='.')) { inp=inp.slice(1,inp.length);}
      try {
        inp = eval(inp);

        if (inp >=1e21) {
         inp = fixing(inp);
            
        }else{
          inp =inp*1e103;
          if (inp >=1e21) {
            inp = fixing(inp,103);
            if (inp >=1e21) {inp = fixing(inp);}
            
          }else{inp =inp/1e103;}
          
        }
        inp = inp.toFixed(13) ;inp = 1*inp;  
        if(Math.abs(inp- inp.toFixed(5))<1e-10){inp =inp.toFixed(5);inp = 1*inp;} 
        result.style.color = 'rgb(14, 66, 20)';
        if ((inp != fich)&&(!isNaN(inp))) {result.innerText = inp;} 
        
      } catch{}
    }
     
 }
      </script>
</body>
</html>
